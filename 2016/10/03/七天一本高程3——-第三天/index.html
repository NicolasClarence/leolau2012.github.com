<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>七天一本高程3——-第三天 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="DOM函数表达式​    昨天漏讲了一个东西，补上，函数表达式。
​    直接说和函数定义的区别：
​    1.函数定义
12show();//由于函数预解析，这样写一点儿问题也没有function show()&amp;#123;alert(1)&amp;#125;
​    2.函数表达式
12show();//错,因为show是变量，变量预解析，show的值是undefinedvar show = fu">
<meta property="og:type" content="article">
<meta property="og:title" content="七天一本高程3——-第三天">
<meta property="og:url" content="http://yoursite.com/2016/10/03/七天一本高程3——-第三天/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="DOM函数表达式​    昨天漏讲了一个东西，补上，函数表达式。
​    直接说和函数定义的区别：
​    1.函数定义
12show();//由于函数预解析，这样写一点儿问题也没有function show()&amp;#123;alert(1)&amp;#125;
​    2.函数表达式
12show();//错,因为show是变量，变量预解析，show的值是undefinedvar show = fu">
<meta property="og:updated_time" content="2016-10-03T11:35:19.681Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="七天一本高程3——-第三天">
<meta name="twitter:description" content="DOM函数表达式​    昨天漏讲了一个东西，补上，函数表达式。
​    直接说和函数定义的区别：
​    1.函数定义
12show();//由于函数预解析，这样写一点儿问题也没有function show()&amp;#123;alert(1)&amp;#125;
​    2.函数表达式
12show();//错,因为show是变量，变量预解析，show的值是undefinedvar show = fu">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Zoeken"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-七天一本高程3——-第三天" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/03/七天一本高程3——-第三天/" class="article-date">
  <time datetime="2016-10-03T10:01:14.000Z" itemprop="datePublished">2016-10-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      七天一本高程3——-第三天
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h3><h4 id="函数表达式"><a href="#函数表达式" class="headerlink" title="函数表达式"></a>函数表达式</h4><p>​    昨天漏讲了一个东西，补上，函数表达式。</p>
<p>​    直接说和函数定义的区别：</p>
<p>​    1.函数定义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">show();//由于函数预解析，这样写一点儿问题也没有</div><div class="line">function show()&#123;alert(1)&#125;</div></pre></td></tr></table></figure>
<p>​    2.函数表达式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">show();//错,因为show是变量，变量预解析，show的值是undefined</div><div class="line">var show = function()&#123;alert(1)&#125;;</div></pre></td></tr></table></figure>
<h3 id="重中之重的DOM"><a href="#重中之重的DOM" class="headerlink" title="重中之重的DOM"></a>重中之重的DOM</h3><blockquote>
<p>DOM的工作模式是：先加载文档的静态内容、再以动态方式对它们进行刷新，动态刷新不影响文档的静态内容。</p>
</blockquote>
<p>​    1.节点类型</p>
<p>​        DOM有12种节点类型，但是基本上只有1 元素和3 文本节点有些用，</p>
<p>​        如何判断一个节点是不是元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">if(someNode.nodeType==1)&#123; //适用于所有浏览器&#125;</div></pre></td></tr></table></figure>
<p>childNodetype == 1 在不同的浏览器下对空白符的处理有差异，所以出现了更实用的：</p>
<h4 id="children"><a href="#children" class="headerlink" title="children"></a>children</h4><p>​    children 只包含元素节点，但是它有坑，坑就是在IE8和之前浏览器里面包含注释节点，它把注释也算进去，所以注意项目里面别手贱写注释在这里吗嵌套着。</p>
<p><strong>innerHTML 和 nodeValue</strong></p>
<blockquote>
<p>对于文本节点，nodeValue 属性包含文本</p>
<p>对于属性节点，nodeValue 属性包含属性值。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">box.childNodes[0].nodeValue = &apos;&lt;strong&gt;abc&lt;/strong&gt;&apos;;//结果为：&lt;strong&gt;abc&lt;/strong&gt;</div><div class="line">abcbox.innerHTML = &apos;&lt;strong&gt;abc&lt;/strong&gt;&apos;;//结果为：abc</div></pre></td></tr></table></figure>
<p><strong>说个重点：</strong></p>
<p>getElementsByTagName()等方法将返回一个类数组对象 HTMLCollection(NodeList)，这个对象保存着所有相同元素名的节点列表。但是只是类数组对象，没有数组方法，如何转数组：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">function convertToArray(nodes) &#123;</div><div class="line">    var array = null;</div><div class="line">    try &#123;</div><div class="line">        array = Array.prototype.slice.call(nodes, 0);</div><div class="line">    &#125; catch (ex) &#123; //IE8及其以下浏览器</div><div class="line">        array = new Array();</div><div class="line">        for (var i = 0, len = nodes.length; i &lt; len; i++) &#123;</div><div class="line">            array.push(nodes[i]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return array;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>说几个项目中常用的</strong></p>
<p>节点的绝对引用：</p>
<blockquote>
<p>返回文档的根节点：document.documentElement</p>
<p>返回当前文档中被击活的标签节点：document.activeElement</p>
<p>返回鼠标移出的源节点：event.fromElement</p>
<p>返回鼠标移入的源节点：event.toElement</p>
<p>返回激活事件的源节点：event.srcElement</p>
</blockquote>
<p><strong>节点的相对引用：(设当前对节点为node)</strong></p>
<blockquote>
<p>返回父节点：node.parentNode || node.parentElement（IE）</p>
<p>返回子节点集合（包含文本节点及标签节点）：node.childNodes</p>
<p>返回子标签节点集合：node.children</p>
<p>返回子文本节点集合：node.textNodes</p>
<p>返回第一个子节点：node.firstChild</p>
<p>返回最后一个子节点：node.lastChild</p>
<p>返回同属下一个节点：node.nextSibling</p>
<p>返回同属上一个节点：node.previousSibling</p>
</blockquote>
<p><strong>说个坑在IE7以下版本中，</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">setAttribute 和 getAttribute</div><div class="line"></div><div class="line">在IE中是不认识class属性的，需改为className属性，同样，在Firefox中，也是不认识className属性的，Firefox只认识class属性，所以通常做法如下：</div><div class="line"></div><div class="line">element.setAttribute(class, value);  //for firefox</div><div class="line">element.setAttribute(className, value);  //for IE</div></pre></td></tr></table></figure>
<h3 id="开始最重要的地方了，html5扩展API"><a href="#开始最重要的地方了，html5扩展API" class="headerlink" title="开始最重要的地方了，html5扩展API"></a>开始最重要的地方了，html5扩展API</h3><h4 id="1-querySelector和querySelectorAll"><a href="#1-querySelector和querySelectorAll" class="headerlink" title="1.querySelector和querySelectorAll"></a><strong>1.querySelector和querySelectorAll</strong></h4><p><strong>用法在括号里面直接放选择器</strong></p>
<p>查询通过指的是通过一些特征字符串来找到一组元素，或者判断元素是不是满足字符串。</p>
<ol>
<li>IE6/7不区分id和nam在IE6/7下使用getElementById和getElementsByName时会同时返回id或name与给定值相同的元素。由于name通常由后端约定，因此我们在写JS时，应保证id不与name重复。</li>
<li>IE6/7不支持getElementsByClassName和querySelectorAll 这两个函数从IE8开始支持的，因此在IE6/7下，我们实际可以用的只有getElementByTagName。</li>
<li>IE6/7不支持getElementsByTagName(‘<em>’)会返回非元素节点 要么不用</em>，要么自己写个函数过滤一下。</li>
<li>IE8下querySelectorAll对属性选择器不友好 几乎所有浏览器预定义的属性都有了问题，尽量使用自定义属性或者不用属性选择器。</li>
<li>IE8下querySelectorAll不支持伪类 有时候伪类是很好用，IE8并不支持，jquery提供的:first、:last、:even、:odd、:eq、:nth、:lt、:gt并不是伪类，我们在任何时间都不要使用它们。</li>
</ol>
<h4 id="2-classList"><a href="#2-classList" class="headerlink" title="2.classList"></a>2.classList</h4><p>​    有此神器，妈妈担心我各种正则匹配元素了，轻松和class.js说拜拜。</p>
<p>​    知道你关心兼容性，直接上原话：</p>
<p>​    Internet Explorer 8 only supported CSS2 selectors.</p>
<h4 id="3-焦点管理"><a href="#3-焦点管理" class="headerlink" title="3.焦点管理"></a>3.焦点管理</h4><p>​    obj.focus () 触发onfocus事件</p>
<p>​    obj.blur()触发onblur事件</p>
<h4 id="4-readyState属性"><a href="#4-readyState属性" class="headerlink" title="4.readyState属性"></a>4.readyState属性</h4><p>当<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document" target="_blank" rel="external"><code>document</code></a>文档正在加载时,返回”loading”。当文档结束渲染但在加载内嵌资源时，返回”interactive”，并引发<code>DOMContentLoaded</code>事件。当文档加载完成时,返回”complete”，并引发<code>load</code>事件。</p>
<p><code>readystatechange事件</code>会在<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document" target="_blank" rel="external"><code>document</code></a>对象上的readyState属性的属性值发生变化时触发.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// 模拟DOMContentLoaded</div><div class="line">document.onreadystatechange = function () &#123;</div><div class="line">  if (document.readyState == &quot;interactive&quot;) &#123;</div><div class="line">    initApplication();</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// 模拟 load事件</div><div class="line">document.onreadystatechange = function () &#123;</div><div class="line">  if (document.readyState == &quot;complete&quot;) &#123;</div><div class="line">    initApplication();</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="5-自定义属性已经说过了，看我之前的文章。"><a href="#5-自定义属性已经说过了，看我之前的文章。" class="headerlink" title="5.自定义属性已经说过了，看我之前的文章。"></a>5.自定义属性已经说过了，看我之前的文章。</h4><h4 id="innerHTML和outerHTML"><a href="#innerHTML和outerHTML" class="headerlink" title="innerHTML和outerHTML"></a>innerHTML和outerHTML</h4><p>innerHTML不解释，outer:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// HTML:</div><div class="line">// &lt;div id=&quot;d&quot;&gt;&lt;p&gt;Content&lt;/p&gt;&lt;p&gt;Further Elaborated&lt;/p&gt;&lt;/div&gt;</div><div class="line"></div><div class="line">d = document.getElementById(&quot;d&quot;);</div><div class="line">console.log(d.outerHTML);</div><div class="line"></div><div class="line">// 字符串 &apos;&lt;div id=&quot;d&quot;&gt;&lt;p&gt;Content&lt;/p&gt;&lt;p&gt;Further Elaborated&lt;/p&gt;&lt;/div&gt;&apos;</div><div class="line">// 显示在console窗口中</div></pre></td></tr></table></figure>
<p><strong>insertAdjacentHTML</strong></p>
<p><code>insertAdjacentHTML()</code> 将指定的文本解析为 HTML 或 XML，然后将结果节点插入到 DOM 树中的指定位置处。该方法不会重新解析调用该方法的元素，因此不会影响到元素内已存在的元素节点。从而可以避免额外的解析操作，比直接使用 <code>innerHTML</code> 方法要快。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">element.insertAdjacentHTML(position, text);</div></pre></td></tr></table></figure>
<p>关于offset不想多说，上重点</p>
<p><strong>offsetLeft和style.left区别</strong></p>
<p>1.style.left返回的是字符串，比如10px。而offsetLeft返回的是数值，比如数值10</p>
<p>2.style.left是可读写的，offsetLeft是只读的</p>
<p>3.style.left的值需要事先定义(在样式表中定义无效，只能取到在html中定义的值)，否则取到的值是空的</p>
<p><strong>getComputedStyle与currentStyle</strong></p>
<p>getComputedStyle()接受两个参数：要取得计算样式的元素和一个伪元素，如果不需要伪元素，则可以是null。然而，在IE中，并不支持getComputedStyle，IE提供了currentStyle属性。</p>
<p>getComputedStyle(obj , false ) 是支持 w3c (FF12、chrome 14、safari)：在FF新版本中只需要第一个参数，即操作对象，第二个参数写“false”也是大家通用的写法，目的是为了兼容老版本的火狐浏览器。</p>
<p>缺点:在标准浏览器中正常，但在IE6/7/8中不支持</p>
<h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><p>先开个头吧，</p>
<p>1.为了兼容IE，我们将<code>window.event</code>赋给 <code>evt</code>，其他浏览器则会正确将接收到的<code>event</code>对象赋给<code>evt</code>。</p>
<p>2.w3c使用addEventListener来为事件元素添加事件监听器，而IE则使用attachEvent。addEventListener为事件冒泡到的当前对象，而attachEvent是window</p>
<p>3.对于事件类型，IE需要加<code>on + type</code>属性，而其他浏览器则不用</p>
<p>4.对于阻止元素的默认事件行为，下面是w3c和IE的做法：</p>
<pre><code>e.preventDefault();//w3c   

e.returnValue = false;//IE
</code></pre><p>5.对于取消事件传播，w3c和IE也有不同的处理机制：</p>
<pre><code>e.stopPropagation();//w3c

e.cancelBubble = true;//IE
</code></pre><p><strong>跨浏览器获取目标对象</strong></p>
<blockquote>
<p>//跨浏览器获取目标对象</p>
<p>function getTarget(ev){</p>
<pre><code>if(ev.target){//w3c

    return ev.target;

}else if(window.event.srcElement){//IE

    return window.event.srcElement;

}
</code></pre><p>}</p>
</blockquote>
<p>对于获取触发事件的对象，w3c和IE也有不同的做法：</p>
<blockquote>
<p>event.target;//w3c</p>
<p>event.srcElement;//IE</p>
</blockquote>
<p>我们可以使用三目运算符来兼容他们：</p>
<blockquote>
<p>obj = event.srcElement ? event.srcElement : event.target;</p>
</blockquote>
<h4 id="三大不冒泡事件"><a href="#三大不冒泡事件" class="headerlink" title="三大不冒泡事件"></a>三大不冒泡事件</h4><p>所有浏览器的focus/blur事件都不冒泡，万幸的是大部分浏览器支持focusin/focusout事件，不过可恶的firefox连这个都不支持。</p>
<p>IE6、7、8下 submit事件不冒泡。</p>
<p>IE6、7、8下 change事件要等到blur时才触发。</p>
<h4 id="事件流（虽然没什么用，但是面试很爱考）"><a href="#事件流（虽然没什么用，但是面试很爱考）" class="headerlink" title="事件流（虽然没什么用，但是面试很爱考）"></a>事件流（虽然没什么用，但是面试很爱考）</h4><blockquote>
<p>直接说结论：1、事件流</p>
<p>事件冒泡</p>
<p>IE的事件流叫做事件冒泡(event bubbling)，即事件开始时由最具体的元素（文档中嵌套层次最深的那个节点）接收，然后逐级向上传播到较为不具体的节点（文档）。</p>
<p>事件捕获</p>
<p>事件捕获的思想是不太具体的节点应该更早的接收到事件，而最具体的节点应该在最后接收到节点。事件捕获的用意在于事件到达预定目标之前捕获它。</p>
<p>DOM事件流</p>
<p>“DOM2级事件流”规定的事件流包括三个阶段：事件捕获阶段、处于目标阶段和冒泡阶段。首先发生的是事件捕获，为截获事件提供了机会。然后是实际的目标接收到事件。最后一个阶段是冒泡阶段，可以在这个阶段对事件作出响应。</p>
</blockquote>
<p>先到这里吧，明天讲事件绑定，orientationchange ,deviceorientationchange ,和手势事件，然后canvas直接收尾。</p>
<p>后面几天，根据书里面的比如播放器，ajax websoket canvas等直接上代码例子，例子为主，理论为辅。</p>
<p>今天收工。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/10/03/七天一本高程3——-第三天/" data-id="ciu8jlj5r0006jkv4a0i3ptwz" class="article-share-link">Delen</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/10/04/七天一本高程3-第四天/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Nieuwer</strong>
      <div class="article-nav-title">
        
          七天一本高程3_第四天
        
      </div>
    </a>
  
  
    <a href="/2016/10/01/七天一本高程三/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Ouder</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archieven</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recente berichten</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/10/05/node/">node</a>
          </li>
        
          <li>
            <a href="/2016/10/05/php/">php</a>
          </li>
        
          <li>
            <a href="/2016/10/04/anuglar01/">anuglar01</a>
          </li>
        
          <li>
            <a href="/2016/10/04/七天一本高程3-第四天/">七天一本高程3_第四天</a>
          </li>
        
          <li>
            <a href="/2016/10/03/七天一本高程3——-第三天/">七天一本高程3——-第三天</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>